<!DOCTYPE HTML>
<html lang="en">

<head>

    <title>Friend Finder Survey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4"
        crossorigin="anonymous">

    <script src="https://use.fontawesome.com/a9c0e2e853.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
        crossorigin="anonymous">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous" defer></script>
    <!-- <script src="assets/javascript/typed.js"></script>
    <script src="assets/javascript/basicScroll.min.js"></script> -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <!-- <script src="../js/main.js" defer></script> -->
</head>

<body>
    <header>
        <h1>Friendly Survey</h1>
    </header>
    <div class='container' id='surveycontainer'>
        <div class="jumbotron">
            <!-- <form action="/api/friends" method="POST"> -->
                <form>
                <div class="row">
                    <h3><label for='nameLabel'>Name (required)</label></h3>
                    <input type='text' class='form-control' name="namefield"  id="namefield" placeholder="Name" required>
                </div>
                <div class="row">
                        <h3><label for='nameLabel'>Photo URL (required)</label></h3>
                        <input type='text' class='form-control' name="photourl"  id="photourl" placeholder="https://photos.com/myawesomeselfie.jpg" required>
                    </div>
                    <div class="row">
                        <h3>For all questions below 1 is the least and 5 is the most</h3>
                    </div>
                <div class='row'>
                    <h2>Question 1</h2>
                </div>
                <div class="row">
                    <h3>How much do you like ice cream?</h3>
                </div>
                <label for="q1">1-5</label>
                <input type="number" id="q1" name="q1" step="1" min="1" max="5" required />
                <div class="row">
                    <h2>Question 2</h2>
                </div>
                <div class="row">
                    <h3>How much do you like pizza?</h3>
                </div>
                <label for="q2">1-5</label>
                <input type="number" id="q2" name="q2" placeholder="1" step="1" min="1" max="5" required />
                <div class='row'>
                    <h2>Question 3</h2>
                </div>
                <div class="row">
                    <h3>How much do you like sushi?</h3>
                </div>
                <label for="q3">1-5</label>
                <input type="number" id="q3" name="q3" step="1" min="1" max="5" required />
                <div class='row'>
                    <h2>Question 4</h2>
                </div>
                <div class="row">
                    <h3>How much do you like pasta?</h3>
                </div>
                <label for="q4">1-5</label>
                <input type="number" id="q4" name="q4" step="1" min="1" max="5" required />
                <div class='row'>
                    <h2>Question 5</h2>
                </div>
                <div class="row">
                    <h3>How much do you like bacon?</h3>
                </div>
                <label for="q5">1-5</label>
                <input type="number" id="q5" name="q5" step="1" min="1" max="5" required/>

                <button type="submit" id="subbutt" class="btn btn-primary pull-right">Submit</button>

            </form>
        </div>
    </div>
    <div class="modal fade" id="exampleModal" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Your Match</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h2 id="yourmatch"></h2>
                    <img id="matchphoto" src="/app/data/homer.jpg" alt>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">

    $("#subbutt").on("click", function(e){
    e.preventDefault();
    surveyPost();
})

function surveyPost(){
    var currUrl = window.location.origin;

    var newFriend = {
        name: $("#namefield").val().trim(),
        photo: $("#photourl").val().trim(),
        score: [parseInt($("#q1").val()), parseInt($("#q2").val()), parseInt($("#q3").val()), parseInt($("#q4").val()), parseInt($("#q5").val())]
    }
    // console.log("from: " + currUrl);
    console.log("Form Name : " + newFriend.name);
    console.log("FormData: " + newFriend.score[0] + " " + newFriend.score[1] + " " + newFriend.score[2]+ " " + newFriend.score[3]+ " " + newFriend.score[4]);
    
    // $.post("/api/friends"), newFriend, function(response){
        $.ajax({ 
            url:"/api/friends",
            method: "POST",
            data: newFriend
            }).then( function(response){
                console.log(response);
            })


        // $("#yourmatch").text(response.name);
        // $("#matchphoto").attr("src", response.photo);
        // $("#exampleModal").modal("toggle");
    }



    </script>
</body>